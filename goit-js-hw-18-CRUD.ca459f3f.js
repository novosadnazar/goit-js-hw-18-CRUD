let e=async()=>(await fetch("http://localhost:3000/ice-cream")).json(),t=async e=>(await fetch(`http://localhost:3000/ice-cream/${e}`,{method:"DELETE"})).json(),i=async e=>{let t={method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}};return(await fetch("http://localhost:3000/ice-cream",t)).json()},a=async(e,t)=>{let i={method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}};return(await fetch(`http://localhost:3000/ice-cream/${e}`,i)).json()},n=e=>e.map(({id:e,calories:t,description:i,image:a,price:n,title:l})=>`<li class="item" id="${e}">
    <span class="item-span">${e}</span>
    <img src="${a}" alt="${l}" class="image">
<h2 class="title">${l}</h2>
<p class="calories">\u{41A}\u{430}\u{43B}\u{43E}\u{440}\u{456}\u{457}: ${t}</p>
<p class="description">\u{41E}\u{43F}\u{438}\u{441}: ${i}</p>
<p class="price">\u{426}\u{456}\u{43D}\u{430}: ${n} \u{433}\u{440}\u{43D}</p>
<button type="button" data-action="Delete">\u{412}\u{438}\u{434}\u{430}\u{43B}\u{438}\u{442}\u{438}</button>
<button type="button" data-action="Edit">\u{420}\u{435}\u{434}\u{430}\u{433}\u{443}\u{432}\u{430}\u{442}\u{438}</button>
</li>`).join(""),l=document.querySelector(".js-list"),c=document.querySelector(".modal_form"),s=document.querySelector(".bakdrop"),o=document.querySelector(".open_modal"),r=null;function u(){s.style.opacity="1",s.style.pointerEvents="auto"}function p(){s.style.opacity="0",s.style.pointerEvents="none"}o.addEventListener("click",()=>{r=null,c.reset(),u()}),c.addEventListener("submit",t=>{t.preventDefault();let{title:s,calories:o,price:u,description:m,image:d}=t.target.elements,h={title:s.value.trim(),calories:Number(o.value.trim()),price:Number(u.value.trim()),description:m.value.trim(),image:d.value.trim()};Object.values(h).some(e=>""===e||isNaN(h.calories)||isNaN(h.price))?alert("Будь ласка, заповніть усі поля коректно."):null===r?i(h).then(e).then(e=>{l.innerHTML=n(e),c.reset(),p()}).catch(e=>console.error("Помилка POST-запиту:",e)):a(r,h).then(()=>e()).then(e=>{l.innerHTML=n(e),c.reset(),p()}).catch(e=>console.error("Помилка PUT-запиту:",e))}),l.addEventListener("click",i=>{let a=i.target.closest("li");if(!a)return;let s=a.id;"Delete"===i.target.dataset.action&&t(s).then(e).then(e=>{l.innerHTML=n(e)}).catch(e=>console.error("Помилка DELETE-запиту:",e)),"Edit"===i.target.dataset.action&&e().then(e=>{let t=e.find(e=>e.id===s);t&&(c.elements.title.value=t.title||"",c.elements.calories.value=t.calories||"",c.elements.price.value=t.price||"",c.elements.description.value=t.description||"",c.elements.image.value=t.image||"",r=t.id,u())})}),e().then(e=>{l.innerHTML=n(e)});
//# sourceMappingURL=goit-js-hw-18-CRUD.ca459f3f.js.map
