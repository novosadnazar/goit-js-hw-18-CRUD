{"mappings":"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","sources":["<anon>","src/app.js","src/api/getApi.js","src/api/deliceApi.js","src/api/postlsApi.js","src/api/updateIceApi.js","src/markup/create-items.js"],"sourcesContent":["const $3482b160874db60f$export$d98f99a76a2fbc82 = async ()=>{\n    const res = await fetch(\"http://localhost:3000/ice-cream\");\n    const data = res.json();\n    return data;\n};\n\n\nconst $0f34cc3837aa4f28$export$9c08335d724f49ae = async (id)=>{\n    const res = await fetch(`http://localhost:3000/ice-cream/${id}`, {\n        method: \"DELETE\"\n    });\n    const data = res.json();\n    return data;\n};\n\n\nconst $551a4058b2eb6ea0$export$60baec214e5713ce = async (icecrem)=>{\n    const options = {\n        method: \"POST\",\n        body: JSON.stringify(icecrem),\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    };\n    const res = await fetch(\"http://localhost:3000/ice-cream\", options);\n    const data = res.json();\n    return data;\n};\n\n\nconst $dd48cc1058af9cd5$export$713aeb0dad5a80d7 = async (id, icecrem)=>{\n    const options = {\n        method: \"PUT\",\n        body: JSON.stringify(icecrem),\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    };\n    const res = await fetch(`http://localhost:3000/ice-cream/${id}`, options);\n    const data = res.json();\n    return data;\n};\n\n\nconst $ed204593c567f462$export$98e28ab48a350060 = (array)=>{\n    const items = array.map(({ id: id, calories: calories, description: description, image: image, price: price, title: title })=>{\n        return `<li class=\"item\" id=\"${id}\">\n    <span class=\"item-span\">${id}</span>\n    <img src=\"${image}\" alt=\"${title}\" class=\"image\">\n<h2 class=\"title\">${title}</h2>\n<p class=\"calories\">\\u{41A}\\u{430}\\u{43B}\\u{43E}\\u{440}\\u{456}\\u{457}: ${calories}</p>\n<p class=\"description\">\\u{41E}\\u{43F}\\u{438}\\u{441}: ${description}</p>\n<p class=\"price\">\\u{426}\\u{456}\\u{43D}\\u{430}: ${price} \\u{433}\\u{440}\\u{43D}</p>\n<button type=\"button\" data-action=\"Delete\">\\u{412}\\u{438}\\u{434}\\u{430}\\u{43B}\\u{438}\\u{442}\\u{438}</button>\n<button type=\"button\" data-action=\"Edit\">\\u{420}\\u{435}\\u{434}\\u{430}\\u{433}\\u{443}\\u{432}\\u{430}\\u{442}\\u{438}</button>\n</li>`;\n    }).join(\"\");\n    return items;\n};\n\n\nconst $6f40c3a58f594b58$var$listEl = document.querySelector(\".js-list\");\nconst $6f40c3a58f594b58$var$formRef = document.querySelector(\".modal_form\");\nconst $6f40c3a58f594b58$var$backdrop = document.querySelector(\".bakdrop\");\nconst $6f40c3a58f594b58$var$openBtn = document.querySelector(\".open_modal\");\nlet $6f40c3a58f594b58$var$editCardId = null;\nfunction $6f40c3a58f594b58$var$openModal() {\n    $6f40c3a58f594b58$var$backdrop.style.opacity = \"1\";\n    $6f40c3a58f594b58$var$backdrop.style.pointerEvents = \"auto\";\n}\nfunction $6f40c3a58f594b58$var$closeModal() {\n    $6f40c3a58f594b58$var$backdrop.style.opacity = \"0\";\n    $6f40c3a58f594b58$var$backdrop.style.pointerEvents = \"none\";\n}\n$6f40c3a58f594b58$var$openBtn.addEventListener(\"click\", ()=>{\n    $6f40c3a58f594b58$var$editCardId = null;\n    $6f40c3a58f594b58$var$formRef.reset();\n    $6f40c3a58f594b58$var$openModal();\n});\n$6f40c3a58f594b58$var$formRef.addEventListener(\"submit\", (evt)=>{\n    evt.preventDefault();\n    const { title: title, calories: calories, price: price, description: description, image: image } = evt.target.elements;\n    const data = {\n        title: title.value.trim(),\n        calories: Number(calories.value.trim()),\n        price: Number(price.value.trim()),\n        description: description.value.trim(),\n        image: image.value.trim()\n    };\n    if (Object.values(data).some((val)=>val === \"\" || isNaN(data.calories) || isNaN(data.price))) {\n        alert(\"\\u0411\\u0443\\u0434\\u044C \\u043B\\u0430\\u0441\\u043A\\u0430, \\u0437\\u0430\\u043F\\u043E\\u0432\\u043D\\u0456\\u0442\\u044C \\u0443\\u0441\\u0456 \\u043F\\u043E\\u043B\\u044F \\u043A\\u043E\\u0440\\u0435\\u043A\\u0442\\u043D\\u043E.\");\n        return;\n    }\n    if ($6f40c3a58f594b58$var$editCardId === null) {\n        (0, $551a4058b2eb6ea0$export$60baec214e5713ce)(data).then((0, $3482b160874db60f$export$d98f99a76a2fbc82)).then((res)=>{\n            $6f40c3a58f594b58$var$listEl.innerHTML = (0, $ed204593c567f462$export$98e28ab48a350060)(res);\n            $6f40c3a58f594b58$var$formRef.reset();\n            $6f40c3a58f594b58$var$closeModal();\n        }).catch((err)=>console.error(\"\\u041F\\u043E\\u043C\\u0438\\u043B\\u043A\\u0430 POST-\\u0437\\u0430\\u043F\\u0438\\u0442\\u0443:\", err));\n        return;\n    }\n    (0, $dd48cc1058af9cd5$export$713aeb0dad5a80d7)($6f40c3a58f594b58$var$editCardId, data).then(()=>(0, $3482b160874db60f$export$d98f99a76a2fbc82)()).then((res)=>{\n        $6f40c3a58f594b58$var$listEl.innerHTML = (0, $ed204593c567f462$export$98e28ab48a350060)(res);\n        $6f40c3a58f594b58$var$formRef.reset();\n        $6f40c3a58f594b58$var$closeModal();\n    }).catch((err)=>console.error(\"\\u041F\\u043E\\u043C\\u0438\\u043B\\u043A\\u0430 PUT-\\u0437\\u0430\\u043F\\u0438\\u0442\\u0443:\", err));\n});\n$6f40c3a58f594b58$var$listEl.addEventListener(\"click\", (event)=>{\n    const listItem = event.target.closest(\"li\");\n    if (!listItem) return;\n    const itemId = listItem.id;\n    if (event.target.dataset.action === \"Delete\") (0, $0f34cc3837aa4f28$export$9c08335d724f49ae)(itemId).then((0, $3482b160874db60f$export$d98f99a76a2fbc82)).then((res)=>{\n        $6f40c3a58f594b58$var$listEl.innerHTML = (0, $ed204593c567f462$export$98e28ab48a350060)(res);\n    }).catch((err)=>console.error(\"\\u041F\\u043E\\u043C\\u0438\\u043B\\u043A\\u0430 DELETE-\\u0437\\u0430\\u043F\\u0438\\u0442\\u0443:\", err));\n    if (event.target.dataset.action === \"Edit\") (0, $3482b160874db60f$export$d98f99a76a2fbc82)().then((res)=>{\n        const card = res.find((el)=>el.id === itemId);\n        if (!card) return;\n        $6f40c3a58f594b58$var$formRef.elements.title.value = card.title || \"\";\n        $6f40c3a58f594b58$var$formRef.elements.calories.value = card.calories || \"\";\n        $6f40c3a58f594b58$var$formRef.elements.price.value = card.price || \"\";\n        $6f40c3a58f594b58$var$formRef.elements.description.value = card.description || \"\";\n        $6f40c3a58f594b58$var$formRef.elements.image.value = card.image || \"\";\n        $6f40c3a58f594b58$var$editCardId = card.id;\n        $6f40c3a58f594b58$var$openModal();\n    });\n});\n(0, $3482b160874db60f$export$d98f99a76a2fbc82)().then((res)=>{\n    $6f40c3a58f594b58$var$listEl.innerHTML = (0, $ed204593c567f462$export$98e28ab48a350060)(res);\n});\n\n\n//# sourceMappingURL=goit-js-hw-18-CRUD.ca459f3f.js.map\n","\nimport { getIceApi } from \"./api/getApi\"; \nimport { delIceApi } from \"./api/deliceApi\";\nimport { postIceApi } from \"./api/postlsApi\"; \nimport { updateIceApi } from \"./api/updateIceApi\";\nimport { createItemsMarkup } from \"./markup/create-items\"; \n\nconst listEl = document.querySelector(\".js-list\");\nconst formRef = document.querySelector(\".modal_form\");\nconst backdrop = document.querySelector(\".bakdrop\");\nconst openBtn = document.querySelector(\".open_modal\");\n\nlet editCardId = null; \n\n\nfunction openModal() {\n  backdrop.style.opacity = \"1\";\n  backdrop.style.pointerEvents = \"auto\";\n}\n\nfunction closeModal() {\n  backdrop.style.opacity = \"0\";\n  backdrop.style.pointerEvents = \"none\";\n}\n\nopenBtn.addEventListener(\"click\", () => {\n  editCardId = null;\n  formRef.reset();\n  openModal();\n});\n\n\nformRef.addEventListener(\"submit\", (evt) => {\n  evt.preventDefault();\n\n  const { title, calories, price, description, image } = evt.target.elements;\n\n  \n  const data = {\n    title: title.value.trim(),\n    calories: Number(calories.value.trim()),\n    price: Number(price.value.trim()),\n    description: description.value.trim(),\n    image: image.value.trim(),\n  };\n\n\n  if (\n    Object.values(data).some(\n      (val) => val === \"\" || isNaN(data.calories) || isNaN(data.price)\n    )\n  ) {\n    alert(\"Будь ласка, заповніть усі поля коректно.\");\n    return;\n  }\n\n \n  if (editCardId === null) {\n    \n    postIceApi(data)\n      .then(getIceApi) \n      .then((res) => {\n        listEl.innerHTML = createItemsMarkup(res);\n        formRef.reset();\n        closeModal();\n      })\n      .catch((err) => console.error(\"Помилка POST-запиту:\", err));\n    return;\n  }\n\n\n  updateIceApi(editCardId, data)\n    .then(() => getIceApi()) \n    .then((res) => {\n      listEl.innerHTML = createItemsMarkup(res);\n      formRef.reset();\n      closeModal();\n    })\n    .catch((err) => console.error(\"Помилка PUT-запиту:\", err));\n});\n\n\n\nlistEl.addEventListener(\"click\", (event) => {\n  const listItem = event.target.closest(\"li\");\n  if (!listItem) return;\n  const itemId = listItem.id;\n\n  \n  if (event.target.dataset.action === \"Delete\") {\n    delIceApi(itemId)\n      .then(getIceApi)\n      .then((res) => {\n        listEl.innerHTML = createItemsMarkup(res);\n      })\n      .catch((err) => console.error(\"Помилка DELETE-запиту:\", err));\n  }\n\n\n  if (event.target.dataset.action === \"Edit\") {\n    getIceApi()\n      .then((res) => {\n        const card = res.find((el) => el.id === itemId); \n        if (!card) return;\n\n      \n        formRef.elements.title.value = card.title || \"\";\n        formRef.elements.calories.value = card.calories || \"\";\n        formRef.elements.price.value = card.price || \"\";\n        formRef.elements.description.value = card.description || \"\";\n        formRef.elements.image.value = card.image || \"\";\n\n        editCardId = card.id; \n        openModal();\n      })\n   \n  }\n});\n\n\ngetIceApi()\n  .then((res) => {\n    listEl.innerHTML = createItemsMarkup(res);\n  })\n \n","\nexport const getIceApi = async () => {\n  const res = await fetch(\"http://localhost:3000/ice-cream\")\n  const data = res.json()\n  return data\n};\n","\nexport const delIceApi = async (id) => {\nconst res = await fetch(`http://localhost:3000/ice-cream/${id}`, {\n    method: \"DELETE\",\n  })\n  const data = res.json();\n  return data;\n};\n","\nexport const postIceApi = async (icecrem) => {\n  const options = {\n    method: \"POST\",\n    body: JSON.stringify(icecrem),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  };\nconst res = await fetch(\"http://localhost:3000/ice-cream\", options);\nconst data = res.json()\n return data\n};\n","\nexport const updateIceApi = async (id, icecrem) => {\n  const options = {\n    method: \"PUT\",\n    body: JSON.stringify(icecrem),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  };\n\n  const res = await fetch(`http://localhost:3000/ice-cream/${id}`, options);\n  const data = res.json()\n  return data;\n\n};\n","\nexport const createItemsMarkup = (array) => {\n  const items = array\n    .map(({ id, calories, description, image, price, title }) => {\n      return `<li class=\"item\" id=\"${id}\">\n    <span class=\"item-span\">${id}</span>\n    <img src=\"${image}\" alt=\"${title}\" class=\"image\">\n<h2 class=\"title\">${title}</h2>\n<p class=\"calories\">Калорії: ${calories}</p>\n<p class=\"description\">Опис: ${description}</p>\n<p class=\"price\">Ціна: ${price} грн</p>\n<button type=\"button\" data-action=\"Delete\">Видалити</button>\n<button type=\"button\" data-action=\"Edit\">Редагувати</button>\n</li>`;\n    })\n    .join(\"\");\n  return items;\n};\n"],"names":["$3482b160874db60f$export$d98f99a76a2fbc82","res","fetch","json","$0f34cc3837aa4f28$export$9c08335d724f49ae","id","method","$551a4058b2eb6ea0$export$60baec214e5713ce","icecrem","options","body","JSON","stringify","headers","$dd48cc1058af9cd5$export$713aeb0dad5a80d7","$ed204593c567f462$export$98e28ab48a350060","array","map","calories","description","image","price","title","join","$6f40c3a58f594b58$var$listEl","document","querySelector","$6f40c3a58f594b58$var$formRef","$6f40c3a58f594b58$var$backdrop","$6f40c3a58f594b58$var$openBtn","$6f40c3a58f594b58$var$editCardId","$6f40c3a58f594b58$var$openModal","style","opacity","pointerEvents","$6f40c3a58f594b58$var$closeModal","addEventListener","reset","evt","preventDefault","target","elements","data","value","trim","Number","Object","values","some","val","isNaN","alert","then","innerHTML","catch","err","console","error","event","listItem","closest","itemId","dataset","action","card","find","el"],"version":3,"file":"goit-js-hw-18-CRUD.ca459f3f.js.map"}