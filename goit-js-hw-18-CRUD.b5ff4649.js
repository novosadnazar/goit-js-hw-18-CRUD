let e=()=>fetch("http://localhost:3000/ice-cream").then(e=>e.json()),t=e=>e.map(({id:e,calories:t,description:i,image:n,price:a,title:l})=>`<li class="item" id="${e}">
    <span class="item-span">${e}</span>
    <img src="${n}" alt="${l}" class="image">
<h2 class="title">${l}</h2>
<p class="calories">\u{41A}\u{430}\u{43B}\u{43E}\u{440}\u{456}\u{457}: ${t}</p>
<p class="description">\u{41E}\u{43F}\u{438}\u{441}: ${i}</p>
<p class="price">\u{426}\u{456}\u{43D}\u{430}: ${a} \u{433}\u{440}\u{43D}</p>
<button type="button" data-action="Delete">\u{412}\u{438}\u{434}\u{430}\u{43B}\u{438}\u{442}\u{438}</button>
<button type="button" data-action="Edit">\u{420}\u{435}\u{434}\u{430}\u{433}\u{443}\u{432}\u{430}\u{442}\u{438}</button>
</li>`).join(""),i=document.querySelector(".js-list"),n=document.querySelector(".modal_form"),a=document.querySelector(".bakdrop"),l=document.querySelector(".open_modal"),o=null;function c(){a.style.opacity="1",a.style.pointerEvents="auto"}function r(){a.style.opacity="0",a.style.pointerEvents="none"}l.addEventListener("click",()=>{o=null,n.reset(),c()}),n.addEventListener("submit",a=>{var l;a.preventDefault();let{title:c,calories:s,price:u,description:p,image:m}=a.target.elements,d={title:c.value.trim(),calories:Number(s.value.trim()),price:Number(u.value.trim()),description:p.value.trim(),image:m.value.trim()};Object.values(d).some(e=>""===e||isNaN(d.calories)||isNaN(d.price))?alert("Будь ласка, заповніть усі поля коректно."):null===o?fetch("http://localhost:3000/ice-cream",{method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e).then(e=>{i.innerHTML=t(e),n.reset(),r()}).catch(e=>console.error("Помилка POST-запиту:",e)):(l=o,fetch(`http://localhost:3000/ice-cream/${l}`,{method:"PUT",body:JSON.stringify(d),headers:{"Content-Type":"application/json"}}).then(e=>e.json())).then(()=>e()).then(e=>{i.innerHTML=t(e),n.reset(),r()}).catch(e=>console.error("Помилка PUT-запиту:",e))}),i.addEventListener("click",a=>{let l=a.target.closest("li");if(!l)return;let r=l.id;"Delete"===a.target.dataset.action&&fetch(`http://localhost:3000/ice-cream/${r}`,{method:"DELETE"}).then(e=>e.json()).then(e).then(e=>{i.innerHTML=t(e)}).catch(e=>console.error("Помилка DELETE-запиту:",e)),"Edit"===a.target.dataset.action&&e().then(e=>{let t=e.find(e=>e.id===r);t&&(n.elements.title.value=t.title||"",n.elements.calories.value=t.calories||"",n.elements.price.value=t.price||"",n.elements.description.value=t.description||"",n.elements.image.value=t.image||"",o=t.id,c())}).catch(e=>{console.error("Помилка при отриманні даних для редагування:",e)})}),e().then(e=>{i.innerHTML=t(e)}).catch(e=>console.error("Помилка початкового завантаження:",e));
//# sourceMappingURL=goit-js-hw-18-CRUD.b5ff4649.js.map
