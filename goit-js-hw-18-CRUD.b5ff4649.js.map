{"mappings":"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","sources":["<anon>","src/app.js","src/api/getApi.js","src/api/deliceApi.js","src/api/postlsApi.js","src/api/updateIceApi.js","src/markup/create-items.js"],"sourcesContent":["// app.js\nconst $3482b160874db60f$export$d98f99a76a2fbc82 = ()=>{\n    return fetch(\"http://localhost:3000/ice-cream\").then((res)=>res.json());\n};\n\n\nconst $0f34cc3837aa4f28$export$9c08335d724f49ae = (id)=>{\n    return fetch(`http://localhost:3000/ice-cream/${id}`, {\n        method: \"DELETE\"\n    }).then((res)=>res.json());\n};\n\n\nconst $551a4058b2eb6ea0$export$60baec214e5713ce = (icecrem)=>{\n    const options = {\n        method: \"POST\",\n        body: JSON.stringify(icecrem),\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    };\n    return fetch(\"http://localhost:3000/ice-cream\", options).then((res)=>res.json());\n};\n\n\nconst $dd48cc1058af9cd5$export$713aeb0dad5a80d7 = (id, icecrem)=>{\n    const options = {\n        method: \"PUT\",\n        body: JSON.stringify(icecrem),\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    };\n    return fetch(`http://localhost:3000/ice-cream/${id}`, options).then((res)=>res.json());\n};\n\n\nconst $ed204593c567f462$export$98e28ab48a350060 = (array)=>{\n    const items = array.map(({ id: id, calories: calories, description: description, image: image, price: price, title: title })=>{\n        return `<li class=\"item\" id=\"${id}\">\n    <span class=\"item-span\">${id}</span>\n    <img src=\"${image}\" alt=\"${title}\" class=\"image\">\n<h2 class=\"title\">${title}</h2>\n<p class=\"calories\">\\u{41A}\\u{430}\\u{43B}\\u{43E}\\u{440}\\u{456}\\u{457}: ${calories}</p>\n<p class=\"description\">\\u{41E}\\u{43F}\\u{438}\\u{441}: ${description}</p>\n<p class=\"price\">\\u{426}\\u{456}\\u{43D}\\u{430}: ${price} \\u{433}\\u{440}\\u{43D}</p>\n<button type=\"button\" data-action=\"Delete\">\\u{412}\\u{438}\\u{434}\\u{430}\\u{43B}\\u{438}\\u{442}\\u{438}</button>\n<button type=\"button\" data-action=\"Edit\">\\u{420}\\u{435}\\u{434}\\u{430}\\u{433}\\u{443}\\u{432}\\u{430}\\u{442}\\u{438}</button>\n</li>`;\n    }).join(\"\");\n    return items;\n};\n\n\nconst $6f40c3a58f594b58$var$listEl = document.querySelector(\".js-list\");\nconst $6f40c3a58f594b58$var$formRef = document.querySelector(\".modal_form\");\nconst $6f40c3a58f594b58$var$backdrop = document.querySelector(\".bakdrop\");\nconst $6f40c3a58f594b58$var$openBtn = document.querySelector(\".open_modal\");\nlet $6f40c3a58f594b58$var$editCardId = null; // null: додаємо картку (POST), string: редагуємо (PUT)\n// ----------------------------------------------------\n// Функції керування модальним вікном\n// ----------------------------------------------------\nfunction $6f40c3a58f594b58$var$openModal() {\n    $6f40c3a58f594b58$var$backdrop.style.opacity = \"1\";\n    $6f40c3a58f594b58$var$backdrop.style.pointerEvents = \"auto\";\n}\nfunction $6f40c3a58f594b58$var$closeModal() {\n    $6f40c3a58f594b58$var$backdrop.style.opacity = \"0\";\n    $6f40c3a58f594b58$var$backdrop.style.pointerEvents = \"none\";\n}\n$6f40c3a58f594b58$var$openBtn.addEventListener(\"click\", ()=>{\n    $6f40c3a58f594b58$var$editCardId = null;\n    $6f40c3a58f594b58$var$formRef.reset();\n    $6f40c3a58f594b58$var$openModal();\n});\n// ----------------------------------------------------\n// Обробка форми (Створення/Редагування)\n// ----------------------------------------------------\n$6f40c3a58f594b58$var$formRef.addEventListener(\"submit\", (evt)=>{\n    evt.preventDefault();\n    const { title: title, calories: calories, price: price, description: description, image: image } = evt.target.elements;\n    // 1. Створення об'єкта даних\n    const data = {\n        title: title.value.trim(),\n        calories: Number(calories.value.trim()),\n        price: Number(price.value.trim()),\n        description: description.value.trim(),\n        image: image.value.trim()\n    };\n    // 2. Додаткова перевірка (хоча HTML 'required' має працювати)\n    if (Object.values(data).some((val)=>val === \"\" || isNaN(data.calories) || isNaN(data.price))) {\n        alert(\"\\u0411\\u0443\\u0434\\u044C \\u043B\\u0430\\u0441\\u043A\\u0430, \\u0437\\u0430\\u043F\\u043E\\u0432\\u043D\\u0456\\u0442\\u044C \\u0443\\u0441\\u0456 \\u043F\\u043E\\u043B\\u044F \\u043A\\u043E\\u0440\\u0435\\u043A\\u0442\\u043D\\u043E.\");\n        return;\n    }\n    // 3. Вирішення: POST чи PUT\n    if ($6f40c3a58f594b58$var$editCardId === null) {\n        // Режим СТВОРЕННЯ (POST)\n        (0, $551a4058b2eb6ea0$export$60baec214e5713ce)(data).then((0, $3482b160874db60f$export$d98f99a76a2fbc82)) // Після створення отримуємо оновлений список\n        .then((res)=>{\n            $6f40c3a58f594b58$var$listEl.innerHTML = (0, $ed204593c567f462$export$98e28ab48a350060)(res);\n            $6f40c3a58f594b58$var$formRef.reset();\n            $6f40c3a58f594b58$var$closeModal();\n        }).catch((err)=>console.error(\"\\u041F\\u043E\\u043C\\u0438\\u043B\\u043A\\u0430 POST-\\u0437\\u0430\\u043F\\u0438\\u0442\\u0443:\", err));\n        return;\n    }\n    // Режим РЕДАГУВАННЯ (PUT)\n    (0, $dd48cc1058af9cd5$export$713aeb0dad5a80d7)($6f40c3a58f594b58$var$editCardId, data).then(()=>(0, $3482b160874db60f$export$d98f99a76a2fbc82)()) // Після редагування отримуємо оновлений список\n    .then((res)=>{\n        $6f40c3a58f594b58$var$listEl.innerHTML = (0, $ed204593c567f462$export$98e28ab48a350060)(res);\n        $6f40c3a58f594b58$var$formRef.reset();\n        $6f40c3a58f594b58$var$closeModal();\n    }).catch((err)=>console.error(\"\\u041F\\u043E\\u043C\\u0438\\u043B\\u043A\\u0430 PUT-\\u0437\\u0430\\u043F\\u0438\\u0442\\u0443:\", err));\n});\n// ----------------------------------------------------\n// Обробка кліків на картках (Видалення/Редагування)\n// ----------------------------------------------------\n$6f40c3a58f594b58$var$listEl.addEventListener(\"click\", (event)=>{\n    const listItem = event.target.closest(\"li\");\n    if (!listItem) return;\n    const itemId = listItem.id;\n    // 1. ВИДАЛЕННЯ\n    if (event.target.dataset.action === \"Delete\") (0, $0f34cc3837aa4f28$export$9c08335d724f49ae)(itemId).then((0, $3482b160874db60f$export$d98f99a76a2fbc82)).then((res)=>{\n        $6f40c3a58f594b58$var$listEl.innerHTML = (0, $ed204593c567f462$export$98e28ab48a350060)(res);\n    }).catch((err)=>console.error(\"\\u041F\\u043E\\u043C\\u0438\\u043B\\u043A\\u0430 DELETE-\\u0437\\u0430\\u043F\\u0438\\u0442\\u0443:\", err));\n    // 2. РЕДАГУВАННЯ\n    if (event.target.dataset.action === \"Edit\") (0, $3482b160874db60f$export$d98f99a76a2fbc82)().then((res)=>{\n        const card = res.find((el)=>el.id === itemId); // Змінено на строге порівняння ===\n        if (!card) return;\n        // Заповнення полів форми даними картки\n        $6f40c3a58f594b58$var$formRef.elements.title.value = card.title || \"\";\n        $6f40c3a58f594b58$var$formRef.elements.calories.value = card.calories || \"\";\n        $6f40c3a58f594b58$var$formRef.elements.price.value = card.price || \"\";\n        $6f40c3a58f594b58$var$formRef.elements.description.value = card.description || \"\";\n        $6f40c3a58f594b58$var$formRef.elements.image.value = card.image || \"\";\n        $6f40c3a58f594b58$var$editCardId = card.id; // Переводимо у режим редагування\n        $6f40c3a58f594b58$var$openModal();\n    }).catch((err)=>{\n        console.error(\"\\u041F\\u043E\\u043C\\u0438\\u043B\\u043A\\u0430 \\u043F\\u0440\\u0438 \\u043E\\u0442\\u0440\\u0438\\u043C\\u0430\\u043D\\u043D\\u0456 \\u0434\\u0430\\u043D\\u0438\\u0445 \\u0434\\u043B\\u044F \\u0440\\u0435\\u0434\\u0430\\u0433\\u0443\\u0432\\u0430\\u043D\\u043D\\u044F:\", err);\n    });\n});\n// ----------------------------------------------------\n// Початкове завантаження даних\n// ----------------------------------------------------\n(0, $3482b160874db60f$export$d98f99a76a2fbc82)().then((res)=>{\n    $6f40c3a58f594b58$var$listEl.innerHTML = (0, $ed204593c567f462$export$98e28ab48a350060)(res);\n}).catch((err)=>console.error(\"\\u041F\\u043E\\u043C\\u0438\\u043B\\u043A\\u0430 \\u043F\\u043E\\u0447\\u0430\\u0442\\u043A\\u043E\\u0432\\u043E\\u0433\\u043E \\u0437\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F:\", err));\n\n\n//# sourceMappingURL=goit-js-hw-18-CRUD.b5ff4649.js.map\n","// app.js\n\nimport { getIceApi } from \"./api/getApi\"; // Змінено імпорт на getIceApi\nimport { delIceApi } from \"./api/deliceApi\";\nimport { postIceApi } from \"./api/postlsApi\"; // Змінено імпорт на postIceApi\nimport { updateIceApi } from \"./api/updateIceApi\";\nimport { createItemsMarkup } from \"./markup/create-items\"; // Змінено імпорт createItems на createItemsMarkup\n\nconst listEl = document.querySelector(\".js-list\");\nconst formRef = document.querySelector(\".modal_form\");\nconst backdrop = document.querySelector(\".bakdrop\");\nconst openBtn = document.querySelector(\".open_modal\");\n\nlet editCardId = null; // null: додаємо картку (POST), string: редагуємо (PUT)\n\n// ----------------------------------------------------\n// Функції керування модальним вікном\n// ----------------------------------------------------\n\nfunction openModal() {\n  backdrop.style.opacity = \"1\";\n  backdrop.style.pointerEvents = \"auto\";\n}\n\nfunction closeModal() {\n  backdrop.style.opacity = \"0\";\n  backdrop.style.pointerEvents = \"none\";\n}\n\nopenBtn.addEventListener(\"click\", () => {\n  editCardId = null;\n  formRef.reset();\n  openModal();\n});\n\n// ----------------------------------------------------\n// Обробка форми (Створення/Редагування)\n// ----------------------------------------------------\n\nformRef.addEventListener(\"submit\", (evt) => {\n  evt.preventDefault();\n\n  const { title, calories, price, description, image } = evt.target.elements;\n\n  // 1. Створення об'єкта даних\n  const data = {\n    title: title.value.trim(),\n    calories: Number(calories.value.trim()),\n    price: Number(price.value.trim()),\n    description: description.value.trim(),\n    image: image.value.trim(),\n  };\n\n  // 2. Додаткова перевірка (хоча HTML 'required' має працювати)\n  if (\n    Object.values(data).some(\n      (val) => val === \"\" || isNaN(data.calories) || isNaN(data.price)\n    )\n  ) {\n    alert(\"Будь ласка, заповніть усі поля коректно.\");\n    return;\n  }\n\n  // 3. Вирішення: POST чи PUT\n  if (editCardId === null) {\n    // Режим СТВОРЕННЯ (POST)\n    postIceApi(data)\n      .then(getIceApi) // Після створення отримуємо оновлений список\n      .then((res) => {\n        listEl.innerHTML = createItemsMarkup(res);\n        formRef.reset();\n        closeModal();\n      })\n      .catch((err) => console.error(\"Помилка POST-запиту:\", err));\n    return;\n  }\n\n  // Режим РЕДАГУВАННЯ (PUT)\n  updateIceApi(editCardId, data)\n    .then(() => getIceApi()) // Після редагування отримуємо оновлений список\n    .then((res) => {\n      listEl.innerHTML = createItemsMarkup(res);\n      formRef.reset();\n      closeModal();\n    })\n    .catch((err) => console.error(\"Помилка PUT-запиту:\", err));\n});\n\n// ----------------------------------------------------\n// Обробка кліків на картках (Видалення/Редагування)\n// ----------------------------------------------------\n\nlistEl.addEventListener(\"click\", (event) => {\n  const listItem = event.target.closest(\"li\");\n  if (!listItem) return;\n  const itemId = listItem.id;\n\n  // 1. ВИДАЛЕННЯ\n  if (event.target.dataset.action === \"Delete\") {\n    delIceApi(itemId)\n      .then(getIceApi)\n      .then((res) => {\n        listEl.innerHTML = createItemsMarkup(res);\n      })\n      .catch((err) => console.error(\"Помилка DELETE-запиту:\", err));\n  }\n\n  // 2. РЕДАГУВАННЯ\n  if (event.target.dataset.action === \"Edit\") {\n    getIceApi()\n      .then((res) => {\n        const card = res.find((el) => el.id === itemId); // Змінено на строге порівняння ===\n        if (!card) return;\n\n        // Заповнення полів форми даними картки\n        formRef.elements.title.value = card.title || \"\";\n        formRef.elements.calories.value = card.calories || \"\";\n        formRef.elements.price.value = card.price || \"\";\n        formRef.elements.description.value = card.description || \"\";\n        formRef.elements.image.value = card.image || \"\";\n\n        editCardId = card.id; // Переводимо у режим редагування\n        openModal();\n      })\n      .catch((err) => {\n        console.error(\"Помилка при отриманні даних для редагування:\", err);\n      });\n  }\n});\n\n// ----------------------------------------------------\n// Початкове завантаження даних\n// ----------------------------------------------------\n\ngetIceApi()\n  .then((res) => {\n    listEl.innerHTML = createItemsMarkup(res);\n  })\n  .catch((err) => console.error(\"Помилка початкового завантаження:\", err));\n","export const getIceApi = () => {\n  return fetch(\"http://localhost:3000/ice-cream\").then((res) => res.json());\n};\n","\nexport const delIceApi = (id) => {\n  return fetch(`http://localhost:3000/ice-cream/${id}`, {\n    method: \"DELETE\",\n  }).then((res) => res.json());\n};\n","\nexport const postIceApi = (icecrem) => {\n  const options = {\n    method: \"POST\",\n    body: JSON.stringify(icecrem),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  };\n\n  return fetch(\"http://localhost:3000/ice-cream\", options).then((res) =>\n    res.json()\n  );\n};\n","\nexport const updateIceApi = (id, icecrem) => {\n  const options = {\n    method: \"PUT\",\n    body: JSON.stringify(icecrem),\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  };\n\n  return fetch(`http://localhost:3000/ice-cream/${id}`, options).then((res) =>\n    res.json()\n  );\n};\n","\nexport const createItemsMarkup = (array) => {\n  const items = array\n    .map(({ id, calories, description, image, price, title }) => {\n      return `<li class=\"item\" id=\"${id}\">\n    <span class=\"item-span\">${id}</span>\n    <img src=\"${image}\" alt=\"${title}\" class=\"image\">\n<h2 class=\"title\">${title}</h2>\n<p class=\"calories\">Калорії: ${calories}</p>\n<p class=\"description\">Опис: ${description}</p>\n<p class=\"price\">Ціна: ${price} грн</p>\n<button type=\"button\" data-action=\"Delete\">Видалити</button>\n<button type=\"button\" data-action=\"Edit\">Редагувати</button>\n</li>`;\n    })\n    .join(\"\");\n  return items;\n};\n"],"names":["$3482b160874db60f$export$d98f99a76a2fbc82","fetch","then","res","json","$ed204593c567f462$export$98e28ab48a350060","array","map","id","calories","description","image","price","title","join","$6f40c3a58f594b58$var$listEl","document","querySelector","$6f40c3a58f594b58$var$formRef","$6f40c3a58f594b58$var$backdrop","$6f40c3a58f594b58$var$openBtn","$6f40c3a58f594b58$var$editCardId","$6f40c3a58f594b58$var$openModal","style","opacity","pointerEvents","$6f40c3a58f594b58$var$closeModal","addEventListener","reset","evt","preventDefault","target","elements","data","value","trim","Number","Object","values","some","val","isNaN","alert","method","body","JSON","stringify","headers","innerHTML","catch","err","console","error","event","listItem","closest","itemId","dataset","action","card","find","el"],"version":3,"file":"goit-js-hw-18-CRUD.b5ff4649.js.map"}